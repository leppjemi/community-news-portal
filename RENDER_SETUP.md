# Render Deployment Guide

Complete guide for deploying the Community News Portal to Render.

## üöÄ Quick Start

### Step 1: Sign Up for Render

1. Go to https://render.com
2. Sign up with GitHub (recommended for easy repo connection)
3. Verify your email

### Step 2: Create a New Web Service

1. In Render Dashboard, click **"New +"** ‚Üí **"Web Service"**
2. Connect your GitHub repository
3. Select the `community-news-portal` repository
4. Render will auto-detect the `render.yaml` file

### Step 3: Configure the Service

Render will read `render.yaml` automatically, but you can also configure manually:

**Service Settings:**
- **Name:** `community-news-portal`
- **Environment:** `Docker`
- **Dockerfile Path:** `Dockerfile`
- **Docker Context:** `.` (root directory)
- **Health Check Path:** `/health`
- **Plan:** Starter (free) or Standard (recommended for production)

### Step 4: Add PostgreSQL Database

1. Click **"New +"** ‚Üí **"PostgreSQL"**
2. Name it: `community-news-db`
3. Plan: Starter (free tier)
4. Render will automatically link it to your web service via `render.yaml`

**Note:** If you prefer MySQL, you can:
- Use Render's MySQL (paid plans)
- Or use an external MySQL service

### Step 5: Set Environment Variables

Render will auto-populate most variables from `render.yaml`, but verify these:

**Required Variables:**
```bash
APP_NAME=Community News Portal
APP_ENV=production
APP_DEBUG=false
APP_KEY=<auto-generated by Render>
APP_URL=<auto-generated from service URL>

# Database (auto-populated from PostgreSQL service)
DB_CONNECTION=pgsql
DB_HOST=<from database>
DB_PORT=<from database>
DB_DATABASE=<from database>
DB_USERNAME=<from database>
DB_PASSWORD=<from database>

# Session & Cache
SESSION_DRIVER=database
CACHE_DRIVER=database
QUEUE_CONNECTION=database
```

### Step 6: Deploy

1. Click **"Create Web Service"**
2. Render will:
   - Build your Docker image
   - Start the container
   - Run health checks
   - Deploy to production

## üìã Using MySQL Instead of PostgreSQL

If you need MySQL (to match your Railway setup):

### Option 1: External MySQL Service

1. Use a managed MySQL service (PlanetScale, Aiven, etc.)
2. Update `render.yaml` to use direct connection strings:

```yaml
envVars:
  - key: DB_CONNECTION
    value: mysql
  - key: DB_HOST
    value: your-mysql-host.com
  - key: DB_PORT
    value: 3306
  - key: DB_DATABASE
    value: your_database
  - key: DB_USERNAME
    value: your_username
  - key: DB_PASSWORD
    sync: false # Set this manually in Render dashboard
```

### Option 2: Use PostgreSQL (Recommended)

Laravel supports PostgreSQL out of the box. Just update your migrations if needed.

## üîß Configuration Files

### render.yaml

The `render.yaml` file defines:
- Web service configuration
- Database service
- Environment variables
- Health check settings

### Dockerfile

Your existing Dockerfile works with Render! No changes needed.

## üÜö Render vs Railway Comparison

| Feature | Railway | Render |
|---------|---------|--------|
| **Free Tier** | ‚úÖ Yes | ‚úÖ Yes |
| **Docker Support** | ‚úÖ Yes | ‚úÖ Yes |
| **Auto Deploy** | ‚úÖ Yes | ‚úÖ Yes |
| **Health Checks** | ‚úÖ Yes | ‚úÖ Yes |
| **Database** | MySQL/PostgreSQL | PostgreSQL (free), MySQL (paid) |
| **Config File** | `railway.json` | `render.yaml` |
| **Ease of Use** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |

## üîÑ Migration from Railway

### Step 1: Export Environment Variables

From Railway Dashboard:
1. Go to your service ‚Üí Variables
2. Copy all environment variables
3. Note your `APP_KEY` value

### Step 2: Set Up Render

1. Create web service in Render
2. Add PostgreSQL database
3. Copy environment variables to Render
4. Update database connection to PostgreSQL (or use external MySQL)

### Step 3: Update Database Connection

If switching to PostgreSQL:
1. Update `DB_CONNECTION=pgsql` in Render
2. Run migrations (they should work as-is for basic Laravel migrations)

### Step 4: Deploy

1. Push to your main branch
2. Render will auto-deploy
3. Monitor logs for any issues

## üêõ Troubleshooting

### Health Check Failing

**Problem:** Health check at `/health` fails

**Solution:**
1. Check Render logs for startup messages
2. Verify Nginx is listening on the correct port
3. Ensure `/health` endpoint is accessible
4. Check that `healthCheckPath: /health` is set in `render.yaml`

### Database Connection Issues

**Problem:** Can't connect to database

**Solution:**
1. Verify database service is linked
2. Check environment variables are set correctly
3. Ensure `DB_CONNECTION` matches your database type (pgsql or mysql)
4. Check database service is running

### Build Failures

**Problem:** Docker build fails

**Solution:**
1. Check build logs in Render
2. Verify Dockerfile is in root directory
3. Ensure all dependencies are in Dockerfile
4. Check for syntax errors

## üìö Render Resources

- [Render Documentation](https://render.com/docs)
- [Laravel on Render](https://render.com/docs/deploy-laravel)
- [Docker on Render](https://render.com/docs/docker)
- [Environment Variables](https://render.com/docs/environment-variables)

## ‚úÖ Deployment Checklist

- [ ] Render account created
- [ ] GitHub repository connected
- [ ] Web service created
- [ ] PostgreSQL database created
- [ ] Environment variables configured
- [ ] Health check path set to `/health`
- [ ] First deployment successful
- [ ] Database migrations ran
- [ ] Application accessible via Render URL
- [ ] Custom domain configured (optional)

## üéØ Next Steps

1. **Set up custom domain** (optional)
   - Go to service ‚Üí Settings ‚Üí Custom Domains
   - Add your domain
   - Update DNS records

2. **Enable auto-deploy**
   - Already enabled by default
   - Deploys on every push to main branch

3. **Monitor performance**
   - Use Render's metrics dashboard
   - Set up alerts for downtime

4. **Scale if needed**
   - Upgrade to Standard plan for production
   - Add more instances for high traffic

